# 电商合理售价计算器（税务合规版）

## 系统概述

这是一个专业的电商定价工具，专为电商卖家设计，帮助计算商品的合理售价、分析利润构成、规划标价策略，并支持批量商品管理。系统完全考虑了税务合规性，包括进项税抵扣、销项税计算、平台佣金进项税等，确保定价策略的准确性和合规性。

## 核心功能模块

### 1. 售价计算模块
**功能目标**：基于目标利润率，计算满足经营目标的合理售价

**核心特性**：
- 考虑退货率影响，将不可退回成本分摊到有效订单
- 精确计算税费，包括进项税抵扣和销项税
- 支持平台佣金免佣模式
- 实时计算保本ROI和保本广告占比

### 2. 利润计算模块  
**功能目标**：基于实际售价，分析经营利润和成本构成

**核心特性**：
- 实时利润计算，支持参数动态调整
- 详细成本分解，包括基础成本、销售费用、税费分析
- 价格指标展示：加价倍率、毛利率、保本ROI、保本广告占比
- 支持免佣模式下的利润分析

### 3. 标价计算模块
**功能目标**：基于目标到手价，反推建议标价

**核心特性**：
- 支持单品立减（10%、12%、15%、18%等档位）
- 支持满减规则（可设置多档）
- 优惠叠加计算，先立减后满减
- 实时校验，确保到手价接近目标价

### 4. 商品清单模块
**功能目标**：批量管理多商品，支持CSV导入导出

**核心特性**：
- 多商品批量计算利润/利润率
- CSV导入导出，支持批量数据管理
- 平台设置，支持不同平台的费率配置
- 全屏显示，优化大表格查看体验

## 系统字段详解

### 基础成本字段

#### 进货价（不含税）
- **定义**：供应商提供的不含税商品价格
- **单位**：元
- **取值范围**：0.01 - 1,000,000
- **说明**：这是商品的基础成本，不包含任何税费

#### 开票成本（%）
- **定义**：供应商开具发票时收取的额外费用比例
- **单位**：百分比
- **默认值**：6%
- **取值范围**：0 - 100
- **说明**：通常为6%，这部分费用计入实际进货成本

#### 进项税率（%）
- **定义**：商品的进项税率，用于计算可抵扣的进项税额
- **单位**：百分比
- **默认值**：13%
- **取值范围**：0 - 100
- **说明**：服装类目通常为13%，这部分税费可用于抵扣销项税

### 销售环节费用字段

#### 平台抽佣比例（%）
- **定义**：电商平台收取的交易佣金比例
- **单位**：百分比
- **默认值**：5.5%
- **取值范围**：0 - 100
- **说明**：基于最终售价（含税）计算，平台开具6%专票可抵扣进项税

#### 物流费（元/单）
- **定义**：每个订单的快递费用
- **单位**：元/单
- **默认值**：2.8
- **取值范围**：0 - 10,000
- **说明**：不可退回成本，需按退货率分摊

#### 运费险（元/单）
- **定义**：每个订单的运费险费用
- **单位**：元/单
- **默认值**：1.5
- **取值范围**：0 - 100
- **说明**：不可退回成本，需按退货率分摊

#### 全店付费占比（%）
- **定义**：广告费占最终售价的比例
- **单位**：百分比
- **默认值**：30%
- **取值范围**：0 - 100
- **说明**：广告服务商可开具6%专票用于进项抵扣，不可退回成本需分摊

#### 其他成本（元/单）
- **定义**：包装材料等其他固定成本
- **单位**：元/单
- **默认值**：2.5
- **取值范围**：0 - 10,000
- **说明**：预估口径，建议纳入包装材料、耗材、办公与管理等未单独计提的固定/间接费用

#### 销项税率（%）
- **定义**：销售时的增值税税率
- **单位**：百分比
- **默认值**：13%
- **取值范围**：0 - 100
- **说明**：通常与商品进项税率相同，用于计算应缴销项税

### 目标设定字段

#### 目标利润率（%）
- **定义**：期望的利润率，基于最终售价计算
- **单位**：百分比
- **默认值**：5%
- **取值范围**：0 - 100
- **说明**：5%意味着每100元售价中有5元是利润

#### 预计退货率（%）
- **定义**：预计的退货率，影响成本分摊
- **单位**：百分比
- **默认值**：20%
- **取值范围**：0 - 100
- **说明**：20%意味着每100单中有20单会退货，仅统计退货退款比例

## 核心计算逻辑

### 1. 售价计算逻辑

#### 基础成本计算
```
实际进货成本 = 进货价 + 开票费用
商品进项税额 = 进货价 × 进项税率（可抵扣）
```

#### 销售成本计算（考虑退货率）
```
有效销售率 = 1 - 退货率
不可退回成本分摊 = 原成本 ÷ 有效销售率
可退回成本 = 原成本（如平台佣金）
```

#### 最终售价计算
```
含税售价 = (实际进货成本 - 商品进项税 + 不可退回固定成本/有效销售率) ÷ 
          (1 - 平台费率 - 销项税占比 - 目标利润率 - 广告费分摊 + 广告费进项税抵扣 + 平台佣金进项税抵扣)

其中：
- 销项税占比 = 销项税率 ÷ (1 + 销项税率)
- 广告费分摊 = 广告费占比 ÷ 有效销售率
- 广告费进项税抵扣 = 广告费分摊 × 6%
- 平台佣金进项税抵扣 = 平台费率 × 6%
```

### 2. 利润计算逻辑

#### 实际利润计算
```
实际利润 = 含税售价 - 总成本
总成本 = 实际进货成本 + 平台佣金 + 分摊后广告费 + 分摊后固定成本 + 实际应缴税费

其中：
- 实际应缴税费 = 销项税 - 总可抵扣进项税
- 总可抵扣进项税 = 商品进项税 + 广告费进项税 + 平台佣金进项税
```

#### 利润率计算
```
利润率 = 实际利润 ÷ 含税售价 × 100%
```

### 3. 标价计算逻辑

#### 优惠叠加顺序
1. **单品立减**：标价 × (1 - 立减比例)
2. **满减判断**：根据立减后价格判断是否触发满减
3. **最终到手价**：立减后价格 - 满减金额

#### 标价反推
```
建议标价 = (目标到手价 + 满减金额) ÷ (1 - 立减比例)
```

### 4. 保本ROI计算逻辑

#### 保本广告占比计算
```
保本广告占比 = (1 - 退货率) ÷ (1 - 6%) × (D - B/P)

其中：
- D = 1 - 平台费率 - 销项税占比 + 6% × 平台费率
- B = 实际进货成本 - 商品进项税 + 固定成本/有效销售率
- P = 含税售价
```

#### 保本ROI计算
```
保本ROI = 有效销售率 ÷ 保本广告占比
```

## 技术架构

### 前端技术栈
- **HTML5**：语义化标签，支持移动端适配
- **CSS3**：Grid布局、Flexbox、CSS变量、响应式设计
- **JavaScript ES6+**：模块化设计、事件委托、异步处理

### 核心算法模块
- **`calculatePurchaseCost()`**：进货成本计算
- **`calculateSalesCost()`**：销售成本计算
- **`calculatePrices()`**：最终价格计算
- **`calculateBreakevenROI()`**：保本ROI计算
- **`calculateListPrice()`**：标价反推计算

### 数据持久化
- **localStorage**：用户输入参数自动保存
- **CSV导入导出**：支持批量数据管理
- **实时计算**：输入变更时自动重新计算

## 使用方法

### 1. 基础使用
1. 直接用浏览器打开 `index.html` 文件
2. 选择相应的功能模块（售价计算/利润计算/标价计算/商品清单）
3. 输入相关参数
4. 点击计算按钮查看结果

### 2. 售价计算流程
1. 输入基础成本（进货价、开票成本、进项税率）
2. 设置销售环节费用（平台佣金、物流费、广告费等）
3. 设定目标（目标利润率、预计退货率）
4. 点击"计算售价"获取建议售价

### 3. 利润计算流程
1. 输入基础信息（进货价、实际售价）
2. 设置费用参数（营销费用、平台费用、物流费用等）
3. 系统实时计算利润和利润率
4. 查看详细成本构成分析

### 4. 标价计算流程
1. 设定目标到手价
2. 选择单品立减档位
3. 配置满减规则
4. 系统反推建议标价

### 5. 商品清单管理
1. 新增商品行或导入CSV文件
2. 设置各商品参数
3. 一键重算所有商品
4. 导出计算结果

## 高级功能

### 1. 免佣模式
- 支持平台佣金免佣开关
- 免佣模式下平台佣金按0%计算
- 适用于自有平台或特殊合作模式

### 2. 批量利润率推演
- 支持不同广告占比和退货率组合的批量计算
- 矩阵式展示，便于选择最优参数组合
- 实时参数调整，即时更新结果

### 3. 价格推演
- 固定其他参数，变动含税售价、退货率、付费占比
- 帮助理解各参数对利润的影响
- 支持多场景对比分析

### 4. 分享与导出
- 支持将计算结果保存为图片
- 复制图片到剪贴板
- 系统分享功能（支持文件分享的浏览器）

## 注意事项

### 1. 税务合规性
- 所有金额输入均为不含税价格
- 系统已考虑进项税抵扣，确保税费计算准确
- 支持不同品类的税率设置

### 2. 退货率设置
- 仅统计退货退款比例，不包括仅退款订单
- 退货率影响不可退回成本的分摊
- 建议基于实际运营数据调整

### 3. 费用分摊
- 不可退回成本按有效销售率分摊
- 可退回成本（如平台佣金）不参与分摊
- 广告费作为不可退回成本需要分摊

### 4. 计算精度
- 系统支持小数点后两位精度
- 税费计算遵循国家税务规定
- 建议定期验证计算结果与实际经营数据的匹配度

## 后续开发计划

- [ ] 添加批量计算功能优化
- [ ] 支持不同品类的税率预设
- [ ] 添加历史计算记录功能
- [ ] 支持多币种计算
- [ ] 添加数据可视化图表
- [ ] 支持API接口调用
- [ ] 移动端APP开发

## 技术支持

如有问题或建议，请通过以下方式联系：
- 查看代码注释了解详细实现逻辑
- 检查浏览器控制台的调试输出
- 参考系统内置的帮助提示和说明

---

**版本**：v2.0  
**更新日期**：2024年  
**兼容性**：支持现代浏览器，移动端友好